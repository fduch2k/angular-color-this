/*! angular-color-this - v1.0.0 - 2015-09-24
* http://eknowles.github.io/angular-color-this/
* Copyright (c) 2015 ; Licensed  */

angular.module("ngColorThis",[]).factory("Color",function(){function a(a){var b,d,e,f,g,h,i="",j=-5;a=a.toString();for(var k=a.length-1;k>=0;k--)for(var l=a.charCodeAt(k).toString().split(""),m=l.length-1;m>=0;m--){var n=l[m]-j;4>n&&(n=parseInt(n)+4),i+=Math.pow(n*Math.round(n/2),8)}return i.length%3===0&&(i=i.split("").reverse().join("")),f=Math.floor(i.length/3),g=2*f,h=i.length-3,b=c(i[f],i[f+1],i[f+2]),d=c(i[g],i[g+1],i[g+2]),e=c(i[h],i[h+1],i[h+2]),{red:b,green:d,blue:e}}function b(a,b,c){var d=299*a+587*b+114*c;return d>=128e3?"#000000":"#FFFFFF"}function c(a,b,c){for(var d=parseInt(a+b+c);d>255;)d=Math.round(d/5);return d}function d(a,b,c){return"rgb("+a+", "+b+", "+c+")"}return{convert:a,toVal:c,getContrastColor:b,rgbToCSS:d}}).directive("colorThis",["Color",function(a){return{restrict:"A",scope:{color:"="},link:function(b,c,d,e){b.$watch("color",function(b,e){if(b){var f=a.convert(b),g=a.rgbToCSS(f.red,f.green,f.blue);c.css(d.colorThis,g),d.contrastColor&&c.css(d.contrastColor,a.getContrastColor(f.red,f.green,f.blue))}},!0)}}}]);